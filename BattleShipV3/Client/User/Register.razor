@page "/register"

@using MudBlazor;

@*@using BattleShipV3.Server*@

@inject ToastService toastService

<h3>Register</h3>


<MudText>Email</MudText>
<MudInputString InputType="InputType.Email" @bind-Value="_email"></MudInputString>

<MudText>UserName</MudText>
<MudInputString @bind-Value="_userName"></MudInputString>

<MudText>Password</MudText>
<MudInputString InputType="InputType.Password" @bind-Value="_password"></MudInputString>

<MudText>Password</MudText>
<MudInputString InputType="InputType.Password" @bind-Value="_passwordConfirmation"></MudInputString>

<MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="RegisterUser">Register</MudButton>

@code {
    string _userName { get; set; }
    string _email { get; set; }
    string _password { get; set; }
    string _passwordConfirmation { get; set; }

    protected async Task OnInitializedAsync()
    {
        Console.WriteLine("A");
    }

    protected void RegisterUser()
    {
        if (UserIsValid()){
            toastService.ShowToast("Toast", Data.Enums.ToastLevel.Info);

        }
        Console.WriteLine("A");
    }

    protected bool UserIsValid(){
        if (!_email.Contains('@') || _email is null)
        {
            return false;
        }
        else if (_password.Length < 3 || _password is null)
        {
            return false;
        }
        else if(!_password.Equals(_passwordConfirmation))
        {
            return false;
        }
        else if(_userName is null)
        {
            return false;
        }
        return true;
    }
}
